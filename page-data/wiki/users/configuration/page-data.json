{"componentChunkName":"component---src-templates-wiki-js","path":"/wiki/users/configuration/","result":{"data":{"markdownRemark":{"html":"<h1>Configuring Velocity</h1>\n<p>Velocity has been designed to be simple and unambiguous to configure.</p>\n<h2>The configuration file</h2>\n<p>Velocity is largely configured from the <code class=\"language-text\">velocity.toml</code> file. This file is created in the directory where you started\nthe proxy.</p>\n<h2>The configuration format</h2>\n<p>Before we continue, it is useful to take a step back and note that Velocity uses the <a href=\"https://github.com/toml-lang/toml\">TOML</a> format for its\nconfiguration. TOML was designed to be easy to understand, so you should not have difficulty understanding\nVelocity's configuration file.</p>\n<h2>Root section</h2>\n<p>These settings mostly cover the basic, most essential settings of the proxy.</p>\n<table>\n<thead>\n<tr>\n<th>Setting Name</th>\n<th>Type</th>\n<th>Default</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">config-version</code></td>\n<td>String</td>\n<td><code class=\"language-text\">1.0</code></td>\n<td>This is the current config version used by Velocity. you should not alter this setting.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">bind</code></td>\n<td>Address</td>\n<td><code class=\"language-text\">0.0.0.0:25577</code></td>\n<td>This tells the proxy to accept connections on a specific IP. By default, Velocity will listen for connections on all IP addresses on the computer on port 25577</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">motd</code></td>\n<td>Chat</td>\n<td><code class=\"language-text\">&amp;3A Velocity Server</code></td>\n<td>This allows you to change the message shown to players when they add your server to their server list. You can use legacy Minecraft color codes or JSON chat.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">show-max-players</code></td>\n<td>Integer</td>\n<td><code class=\"language-text\">500</code></td>\n<td>This allows you to customize the number of \"maximum\" players in the  player's server list. Note that Velocity doesn't have a maximum number of players it supports.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">forwarding-secret</code></td>\n<td>String</td>\n<td>Randomly generated string</td>\n<td>This setting is used as a secret to ensure that player info forwarded by Velocity comes from your proxy and not from someone pretending to run Velocity. See the \"Player info forwarding\" section for more info.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">announce-forge</code></td>\n<td>Boolean</td>\n<td><code class=\"language-text\">false</code></td>\n<td>This setting determines whether Velocity should present itself as a Forge/FML-compatible server. By default, this is disabled.</td>\n</tr>\n</tbody>\n</table>\n<h2><code class=\"language-text\">server</code> section</h2>\n<table>\n<thead>\n<tr>\n<th>Setting Name</th>\n<th>Type</th>\n<th>Default</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>A server name</td>\n<td>Address</td>\n<td>See the default configuration below</td>\n<td>This makes the proxy aware of a server that it can connect to.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">try</code></td>\n<td>Array</td>\n<td>[\"lobby\"]</td>\n<td>This specifies what servers Velocity should try to connect to upon player login and when a player is kicked from a server.</td>\n</tr>\n</tbody>\n</table>\n<h2><code class=\"language-text\">forced-hosts</code> section</h2>\n<table>\n<thead>\n<tr>\n<th>Setting Name</th>\n<th>Type</th>\n<th>Default</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>A host name</td>\n<td>Hostname</td>\n<td>See the default configuration below.</td>\n<td>This configures the proxy to create a forced host for the specified hostname. An array of servers to try for the specified hostname is the value.</td>\n</tr>\n</tbody>\n</table>\n<h2><code class=\"language-text\">advanced</code> section</h2>\n<table>\n<thead>\n<tr>\n<th>Setting name</th>\n<th>Type</th>\n<th>Default</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">compression-threshold</code></td>\n<td>Integer</td>\n<td>256</td>\n<td>This is the minimum size (in bytes) that a packet has before the proxy compresses it. Minecraft uses 256 bytes by default.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">compression-level</code></td>\n<td>Integer</td>\n<td>-1</td>\n<td>This setting indicates what <code class=\"language-text\">zlib</code> compression level the proxy should use to compress packets. The default value uses the default zlib level, which is dependent on the zlib version. This number goes from <code class=\"language-text\">0</code> to <code class=\"language-text\">9</code>, where <code class=\"language-text\">0</code> means no compression and <code class=\"language-text\">9</code> indicates maximum compression.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">login-ratelimit</code></td>\n<td>Integer</td>\n<td>3000</td>\n<td>This setting determines the minimum amount of time (in milliseconds) that must pass before a connection from the same IP address will be accepted by the proxy. A default value of <code class=\"language-text\">0</code> disables the rate limit.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">connection-timeout</code></td>\n<td>Integer</td>\n<td>5000</td>\n<td>This setting determines how long the proxy will wait to connect to a server before timing out.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">read-timeout</code></td>\n<td>Integer</td>\n<td>300000</td>\n<td>This setting determines how long the proxy will wait to receive data from the server before timing out. If you use Forge, you may need to increase this setting.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">proxy-protocol</code></td>\n<td>Boolean</td>\n<td>false</td>\n<td>This setting determines whether or not Velocity should receive HAProxy PROXY messages. If you don't use HAProxy, leave this setting off.</td>\n</tr>\n</tbody>\n</table>\n<h2><code class=\"language-text\">query</code> section</h2>\n<table>\n<thead>\n<tr>\n<th>Setting name</th>\n<th>Type</th>\n<th>Default</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">enabled</code></td>\n<td>Boolean</td>\n<td><code class=\"language-text\">false</code></td>\n<td>Whether or not Velocity should reply to GameSpy 4 (Minecraft query protocol) requests. You can usually leave this false.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">port</code></td>\n<td>Number</td>\n<td><code class=\"language-text\">25577</code></td>\n<td>Specifies which port that Velocity should listen on for GameSpy 4 (Minecraft query protocol) requests.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">map</code></td>\n<td>String</td>\n<td>Velocity</td>\n<td>Specifies the map name to be shown to clients.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">show-plugins</code></td>\n<td>Boolean</td>\n<td>false</td>\n<td>Whether or not Velocity plugins are included in the query responses.</td>\n</tr>\n</tbody>\n</table>\n<h2><code class=\"language-text\">metrics</code> section</h2>\n<table>\n<thead>\n<tr>\n<th>Setting name</th>\n<th>Type</th>\n<th>Default</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">enabled</code></td>\n<td>Boolean</td>\n<td><code class=\"language-text\">true</code></td>\n<td>Whether or not Velocity should send metrics to bStats.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">id</code></td>\n<td>UUID</td>\n<td>Randomly generated UUID</td>\n<td>A randomly generated UUID that uniquely identifies your Velocity server. You should not alter this setting.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">log-failure</code></td>\n<td>Boolean</td>\n<td><code class=\"language-text\">false</code></td>\n<td>Whether or not Velocity should log whenever it fails to connect to bStats.</td>\n</tr>\n</tbody>\n</table>\n<h2>The default configuration</h2>\n<p>Below is the default configuration file for Velocity, <code class=\"language-text\">velocity.toml</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"toml\"><pre class=\"language-toml\"><code class=\"language-toml\"><span class=\"token comment\"># Config version. Do not change this</span>\n<span class=\"token key property\">config-version</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"1.0\"</span>\n\n<span class=\"token comment\"># What port should the proxy be bound to? By default, we'll bind to all addresses on port 25577.</span>\n<span class=\"token key property\">bind</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"0.0.0.0:25577\"</span>\n\n<span class=\"token comment\"># What should be the MOTD? This gets displayed when the player adds your server to</span>\n<span class=\"token comment\"># their server list. Legacy color codes and JSON are accepted.</span>\n<span class=\"token key property\">motd</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"&amp;3A Velocity Server\"</span>\n\n<span class=\"token comment\"># What should we display for the maximum number of players? (Velocity does not support a cap</span>\n<span class=\"token comment\"># on the number of players online.)</span>\n<span class=\"token key property\">show-max-players</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">500</span>\n\n<span class=\"token comment\"># Should we authenticate players with Mojang? By default, this is on.</span>\n<span class=\"token key property\">online-mode</span> <span class=\"token punctuation\">=</span> <span class=\"token boolean\">true</span>\n\n<span class=\"token comment\"># Should we forward IP addresses and other data to backend servers?</span>\n<span class=\"token comment\"># Available options:</span>\n<span class=\"token comment\"># - \"none\":   No forwarding will be done. All players will appear to be connecting from the</span>\n<span class=\"token comment\">#             proxy and will have offline-mode UUIDs.</span>\n<span class=\"token comment\"># - \"legacy\": Forward player IPs and UUIDs in a BungeeCord-compatible format. Use this if</span>\n<span class=\"token comment\">#             you run servers using Minecraft 1.12 or lower.</span>\n<span class=\"token comment\"># - \"modern\": Forward player IPs and UUIDs as part of the login process using Velocity's</span>\n<span class=\"token comment\">#             native forwarding. Only applicable for Minecraft 1.13 or higher.</span>\n<span class=\"token key property\">player-info-forwarding-mode</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"NONE\"</span>\n\n<span class=\"token comment\"># If you are using modern IP forwarding, configure an unique secret here.</span>\n<span class=\"token key property\">forwarding-secret</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"redacted\"</span>\n\n<span class=\"token comment\"># Announce whether or not your server supports Forge. If you run a modded server, we</span>\n<span class=\"token comment\"># suggest turning this on.</span>\n<span class=\"token key property\">announce-forge</span> <span class=\"token punctuation\">=</span> <span class=\"token boolean\">false</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token table class-name\">servers</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># Configure your servers here. Each key represents the server's name, and the value</span>\n<span class=\"token comment\"># represents the IP address of the server to connect to.</span>\n<span class=\"token key property\">lobby</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"127.0.0.1:30066\"</span>\n<span class=\"token key property\">factions</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"127.0.0.1:30067\"</span>\n<span class=\"token key property\">minigames</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"127.0.0.1:30068\"</span>\n\n<span class=\"token comment\"># In what order we should try servers when a player logs in or is kicked from aserver.</span>\n<span class=\"token key property\">try</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"lobby\"</span>\n<span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token table class-name\">forced-hosts</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># Configure your forced hosts here.</span>\n<span class=\"token key property\">\"lobby.example.com\"</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"lobby\"</span>\n<span class=\"token punctuation\">]</span>\n<span class=\"token key property\">\"factions.example.com\"</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">[</span>\n   <span class=\"token string\">\"factions\"</span>\n<span class=\"token punctuation\">]</span>\n<span class=\"token key property\">\"minigames.example.com\"</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"minigames\"</span>\n<span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token table class-name\">advanced</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># How large a Minecraft packet has to be before we compress it. Setting this to zero will</span>\n<span class=\"token comment\"># compress all packets, and setting it to -1 will disable compression entirely.</span>\n<span class=\"token key property\">compression-threshold</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">256</span>\n\n<span class=\"token comment\"># How much compression should be done (from 0-9). The default is -1, which uses the</span>\n<span class=\"token comment\"># default level of 6.</span>\n<span class=\"token key property\">compression-level</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">-1</span>\n\n<span class=\"token comment\"># How fast (in milliseconds) are clients allowed to connect after the last connection? By</span>\n<span class=\"token comment\"># default, this is three seconds. Disable this by setting this to 0.</span>\n<span class=\"token key property\">login-ratelimit</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">3000</span>\n\n<span class=\"token comment\"># Specify a custom timeout for connection timeouts here. The default is five seconds.</span>\n<span class=\"token key property\">connection-timeout</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">5000</span>\n\n<span class=\"token comment\"># Specify a read timeout for connections here. The default is 30 seconds.</span>\n<span class=\"token key property\">read-timeout</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">30000</span>\n\n<span class=\"token comment\"># Enables compatibility with HAProxy.</span>\n<span class=\"token key property\">proxy-protocol</span> <span class=\"token punctuation\">=</span> <span class=\"token boolean\">false</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token table class-name\">query</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># Whether to enable responding to GameSpy 4 query responses or not.</span>\n<span class=\"token key property\">enabled</span> <span class=\"token punctuation\">=</span> <span class=\"token boolean\">false</span>\n\n<span class=\"token comment\"># If query is enabled, on what port should the query protocol listen on?</span>\n<span class=\"token key property\">port</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">25577</span>\n\n<span class=\"token comment\"># This is the map name that is reported to the query services.</span>\n<span class=\"token key property\">map</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"Velocity\"</span>\n\n<span class=\"token comment\"># Whether plugins should be shown in query response by default or not</span>\n<span class=\"token key property\">show-plugins</span> <span class=\"token punctuation\">=</span> <span class=\"token boolean\">false</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token table class-name\">metrics</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># Whether metrics will be reported to bStats (https://bstats.org).</span>\n<span class=\"token comment\"># bStats collects some basic information, like how many people use Velocity and their</span>\n<span class=\"token comment\"># player count. We recommend keeping bStats enabled, but if you're not comfortable with</span>\n<span class=\"token comment\"># this, you can turn this setting off. There is no performance penalty associated with</span>\n<span class=\"token comment\"># having metrics enabled, and data sent to bStats can't identify your server.</span>\n<span class=\"token key property\">enabled</span> <span class=\"token punctuation\">=</span> <span class=\"token boolean\">true</span>\n\n<span class=\"token comment\"># A unique, anonymous ID to identify this proxy with.</span>\n<span class=\"token key property\">id</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"9cc04bee-691b-450b-94dc-5f5de5b6847b\"</span>\n\n<span class=\"token key property\">log-failure</span> <span class=\"token punctuation\">=</span> <span class=\"token boolean\">false</span></code></pre></div>","frontmatter":{"title":""},"excerpt":"Configuring Velocity Velocity has been designed to be simple and unambiguous to configure. The configuration file Velocity is largely…"}},"pageContext":{"slug":"/users/configuration/"}}}