{"componentChunkName":"component---src-templates-wiki-js","path":"/wiki/deployment/security/","result":{"data":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Securing Your Servers\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"It is vital that you secure your backend servers. As part of setting up Velocity,\\nyou will put your server into offline mode, which means in theory, someone could\\nimpersonate any player on your server. This is extremely dangerous, so it is\\nimportant to make sure only the proxy can connect to your servers.\"), mdx(\"p\", null, \"This guide will explore the various options for securing your backend servers so\\nonly your proxy can connect to them. Note that this is an \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"exploration\"), \" of options,\\naiming to review the various options and give you advantages and disadvantages to\\nthem so you can make an informed decision.\"), mdx(\"p\", null, \"This list is not in any particular order, and almost all of these methods can be\\ncombined as needed.\"), mdx(\"h2\", null, \"Operating System Firewalls\"), mdx(\"p\", null, \"When properly configured, using the firewall facilities provided by your server's\\noperating system is a highly effective way to protect your servers.\"), mdx(\"p\", null, \"Instructions for your operating system may vary. Solutions for major server OSes include:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Windows: Windows Firewall\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Linux: iptables, nftables\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Advantages\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Fool-proof if you do not give untrusted servers access to your servers\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Does not require any extra Minecraft server configuration\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Part of good system hardening advice for any operating system\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Disadvantages\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Tricky first-time setup\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"May be difficult to use with multiple proxies\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Firewall configuration must be kept in sync with new servers and proxies\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Not viable on a shared host\")), mdx(\"h2\", null, \"Velocity Modern Forwarding\"), mdx(\"p\", null, \"If your server only supports Minecraft 1.13 and above, Velocity's modern forwarding\\ncan take care of both securing your server and forwarding player information to your\\nservers.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Advantages\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Get player info forwarding \\\"for free\\\"\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Secure on a shared host, provided the host has implemented proper protections\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Works if you host your server on multiple physical servers\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Disadvantages\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Only works for Minecraft 1.13 and above\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Requires Paper 1.13 or above, or FabricProxy if you use Fabric\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Relies on the forwarding secret being kept secret\")), mdx(\"h2\", null, \"Binding To \", mdx(\"code\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"localhost\")), mdx(\"p\", null, \"If you are hosting your proxy on the same physical computer as your other servers\\n(and nobody else is hosting servers on them), binding your servers to \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"localhost\"), \"\\nis a very simple way of protecting them from getting connected to by anything other\\nthan the proxy.\"), mdx(\"p\", null, \"For each server, open the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"server.properties\"), \" file. Find the line that starts with\\n\", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"server-ip\"), \" and change the line to \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"server-ip=127.0.0.1\"), \". Save the file and restart\\nthe server.\"), mdx(\"p\", null, \"Afterwards, open your \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"velocity.toml\"), \" file and ensure all the servers are pointing to\\n\", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"127.0.0.1:<port>\"), \".\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Advantages\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A relatively trivial setup compared to other methods discussed\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Fool-proof if you do not give untrusted users access to your server\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Disadvantages\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Setup must be reversed (and an alternate method used) if you move any of the\\nservers to a different physical server (such that the proxy and the server\\nare not on the same physical server)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Not viable on a shared host\")), mdx(\"h2\", null, \"Using an Encrypted Tunnel\"), mdx(\"p\", null, \"This is a variation on \\\"Binding To \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"localhost\"), \"\\\", but instead of hosting all your\\nservers on a single physical server, you will set up an encrypted tunnel between\\neach of your servers, and make sure the server only listens for incoming connections\\nfrom the tunnel. There are many different solutions, ranging from VPN solutions\\nsuch as \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.wireguard.com\"\n  }), \"WireGuard\"), \", \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://openvpn.net/\"\n  }), \"OpenVPN\"), \", and\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.tinc-vpn.org/\"\n  }), \"tinc\"), \" to encrypted tunnels such as \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.tarsnap.com/spiped.html\"\n  }), \"spiped\"), \".\\nThis guide will not go into details of how to set up each of these solutions.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Advantages\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Encrypts traffic between your proxy and your servers\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Disadvantages\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Very complex setup\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Impossible to use on a shared host\")), mdx(\"h2\", null, \"IP Whitelisting Plugins\"), mdx(\"p\", null, \"As a last line of defense, you can choose to restrict logins to users on an IP whitelist\\nusing a plugin like \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.spigotmc.org/resources/ipwhitelist.61/\"\n  }), \"IPWhitelist\"), \".\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Advantages\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"May be your only solution if none of the other solutions will work\\n(especially on a shared host)\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Disadvantages\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Vulnerable to attack if the attacker can get a server on the same\\nnode as your proxy is on\")), mdx(\"h2\", null, \"Other Important Security Advice\"), mdx(\"p\", null, \"This common-sense general advice goes without saying:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Keep frequent backups of your server\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Set up a firewall on your server\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Run your servers as an unprivileged user (this means no \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"sudo\"), \" access or running as\\n\", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"root\"), \" for Linux users!)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Update Velocity, your Minecraft server and server plugins, and your server's operating\\nsystem frequently\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Use strong passwords\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Carefully think about the potential impacts of installing any plugins or software\\nbefore actually doing so\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Secure any and all other services you may be running on your server\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Follow all system hardening advice for your operating system\")), mdx(\"p\", null, \"We will not provide a full treatment to the advice given above, so please do some research\\nof your own. Your setup will vary - there is no \\\"one size fits all\\\" advice we can give\\nother than these general guidelines.\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Securing Your Servers"},"excerpt":"It is vital that you secure your backend servers. As part of setting up Velocity,\nyou will put your server into offline mode, which means in…"}},"pageContext":{"slug":"/deployment/security/"}},"staticQueryHashes":["63159454"]}